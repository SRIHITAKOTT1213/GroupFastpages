---
title: Games
layout: default
description: A pretty advanced use of JavaScript building classic snake game using menu controls, key events, snake simulation and timers.  
permalink: /frontend/snake
image: /images/snake.png
categories: []
tags: [javascript, style, controls, timers]
---

{% include nav_data.html %}

<style>
      *, *::after, *::before {
    box-sizing: border-box;
  }

  :root {
    --hue: 200;
    --saturation: 50%;
    --foreground-color: hsl(var(--hue), var(--saturation), 75%);
    --background-color: hsl(var(--hue), var(--saturation), 20%);
  }

  body {
    margin: 0;
    background-color: var(--background-color);
    overflow: hidden;
  }

  .paddle {
    --position: 50;

    position: absolute;
    background-color: var(--foreground-color);
    top: calc(var(--position) * 1vh);
    transform: translateY(-50%);
    width: 1vh;
    height: 10vh;
  }

  .paddle.left {
    left: 1vw;
  }

  .paddle.right {
    right: 1vw;
  }

  .ball {
    --x: 50;
    --y: 50;

    position: absolute;
    background-color: var(--foreground-color);
    left: calc(var(--x) * 1vw);
    top: calc(var(--y) * 1vh);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    width: 2.5vh;
    height: 2.5vh;
  }

  .score {
    display: flex;
    justify-content: center;
    font-weight: bold;
    font-size: 7vh;
    color: var(--foreground-color);
  }

  .score > * {
    flex-grow: 1;
    flex-basis: 0;
    padding: 0 2vh;
    margin: 1vh 0;
    opacity: .5;
  }

  .score > :first-child {
    text-align: right;
    border-right: .5vh solid var(--foreground-color);
  }
</style>


<script>
  import Ball from "js/Ball.js"
  import Paddle from "js/Paddle.js"

  const ball = new Ball(document.getElementById("ball"))
  const playerPaddle = new Paddle(document.getElementById("player-paddle"))
  const computerPaddle = new Paddle(document.getElementById("computer-paddle"))
  const playerScoreElem = document.getElementById("player-score")
  const computerScoreElem = document.getElementById("computer-score")

  let lastTime
  function update(time) {
    if (lastTime != null) {
      const delta = time - lastTime
      ball.update(delta, [playerPaddle.rect(), computerPaddle.rect()])
      computerPaddle.update(delta, ball.y)
      const hue = parseFloat(
        getComputedStyle(document.documentElement).getPropertyValue("--hue")
      )

      document.documentElement.style.setProperty("--hue", hue + delta * 0.01)

      if (isLose()) handleLose()
    }

    lastTime = time
    window.requestAnimationFrame(update)
  }

  function isLose() {
    const rect = ball.rect()
    return rect.right >= window.innerWidth || rect.left <= 0
  }

  function handleLose() {
    const rect = ball.rect()
    if (rect.right >= window.innerWidth) {
      playerScoreElem.textContent = parseInt(playerScoreElem.textContent) + 1
    } else {
      computerScoreElem.textContent = parseInt(computerScoreElem.textContent) + 1
    }
    ball.reset()
    computerPaddle.reset()
  }

  document.addEventListener("mousemove", e => {
    playerPaddle.position = (e.y / window.innerHeight) * 100
  })

  window.requestAnimationFrame(update)
</script>